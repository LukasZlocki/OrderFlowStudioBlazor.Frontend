@page "/addorderweb"
@using OrderFlowStudio.Frontend.Data;

@inject HttpClient http;


<h1>Adding order</h1>

<d1>test select list - test1</d1>
<div class="col-sm">
        <d1>test slect list</d1>
        <select name="number">
            <option value="">select a number</option>
            <option value="1">One</option>
            <option value="2">Two</option>
        </select>
    </div>

<div class="col-sm">
<d1>test select list - test2</d1>
<select class="form-control selectpicker" @bind="_prod.Id">
            <option>--select--</option>
            @foreach (var item in _productList)
            {
                <option value="@item.Id">@item.PartNumber</option>
            }
        </select>  
</div>

<!-- Add form -->
<div class="container">
<div class="row align-items-center">
    <div class="col-md-auto">
        <label>Order number:</label> <br>
        <label>Quantity:</label> <br>
        <label>Part number:</label> <br>
    </div>
    <div class="col-sm">
        <input class="form-control" type="text" placeholder="Order Nb:" aria-label="Search" @bind="_orderNb">
        <input class="form-control" type="text" placeholder="Quantity:" aria-label="Search" @bind="_quantity">
        <input class="form-control" type="text" placeholder="Material Nb:" aria-label="Search" @bind="_partNb">
    </div>
    <div class="col-sm">
        <select class="form-control selectpicker">
            <option>--select--</option>
            @foreach (var item in _productList)
            {
                <option value="@item.Id">@item.PartNumber</option>
            }
        </select>  
    </div>
</div>
</div>

<button class = "btn btn-dark" @onclick="CreateOrder">Create order</button>

@code {

    public class Prod{
        public int Id { get; set; }
        public string PartNumber { get; set; }
        public string ProductDescription { get; set; }
    }

    Prod _prod = new Prod();

    public List<Prod> _productList = new List<Prod>(){       
            new Prod {
                Id = 0,
                PartNumber = "0000",
                ProductDescription = "prod0"
            },
            new Prod {
                Id = 1,
                PartNumber = "1111",
                ProductDescription = "prod1"
            },
        };

    int _orderNb;
    int _quantity;
    string _partNb;
  
    private async Task CreateOrder()
    {
        var orderOnCreateDto = new OrderOnCreateDto
        {
            OrderNumber = _orderNb,
            Quantity = _quantity,
            ProductNumber = _partNb
        };
        var response = await http.PostJsonAsync<Order>("http://localhost:6001/api/addorder", orderOnCreateDto);
    }

    /*
    private async Task LoadProducts()
    {
    }
    */
}